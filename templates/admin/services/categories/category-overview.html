{% extends 'admin/general/base-nav.html' %}
{% load humanize %}

{% block content %}
    <div class="container mt-4 mb-5">
        <div class="row align-items-center mb-4">
            <!-- Service Image (on the left) -->
            {% if context.category.main_image %}
                <div class="col-md-4 text-center">
                    <img src="{{ context.category.main_image.url }}" alt="{{ context.category.name }}"
                         class="img-fluid rounded shadow" style="max-width: 250px;">
                </div>
            {% endif %}

            <!-- Header with Icon (on the right) -->
            <div class="col-md-8 text-center text-md-start mb-3 mb-md-0">
                <div class="d-inline-block bg-light rounded-circle p-2 mb-2">
                    <i class="bi bi-grid-3x3-gap fs-2 text-primary"></i>
                </div>
                <h2 class="fw-bold text-dark">{{ context.category.name }}</h2>
                <p class="text-muted small">Service Category Overview</p>
            </div>
        </div>

        <!-- Stats Cards -->
        <div class="row g-3 justify-content-center mb-4">
            <!-- Total Services -->
            <div class="col-md-4">
                <div class="card border-0 shadow-sm h-100">
                    <div class="card-body text-center p-3">
                        <div class="d-inline-flex align-items-center justify-content-center bg-primary bg-opacity-10 rounded-circle p-2 mb-2">
                            <i class="bi bi-layers fs-4 text-primary"></i>
                        </div>
                        <h4 class="fw-bold text-primary mb-0">{{ context.total_services }}</h4>
                        <p class="text-muted small mb-0">Total Services</p>
                    </div>
                </div>
            </div>

            <!-- Average Price -->
            <div class="col-md-4">
                <div class="card border-0 shadow-sm h-100">
                    <div class="card-body text-center p-3">
                        <div class="d-inline-flex align-items-center justify-content-center bg-success bg-opacity-10 rounded-circle p-2 mb-2">
                            <i class="bi bi-currency-exchange fs-4 text-success"></i>
                        </div>
                        <h4 class="fw-bold text-success mb-0">
                            {% if context.average_price|floatformat:0 %}
                                {{ context.average_price|add:"000"|intcomma }} UZS
                            {% else %}
                                {{ context.average_price|floatformat:3|intcomma }} UZS
                            {% endif %}
                        </h4>
                        <p class="text-muted small mb-0">Average Price</p>
                    </div>
                </div>
            </div>


            <!-- Average Duration -->
            <div class="col-md-4">
                <div class="card border-0 shadow-sm h-100">
                    <div class="card-body text-center p-3">
                        <div class="d-inline-flex align-items-center justify-content-center bg-warning bg-opacity-10 rounded-circle p-2 mb-2">
                            <i class="bi bi-clock fs-4 text-warning"></i>
                        </div>
                        <h4 class="fw-bold text-warning mb-0">{{ context.average_duration|floatformat:0 }}</h4>
                        <p class="text-muted small mb-0">Average Minutes</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Action Buttons with Bottom Spacing -->
        <div class="d-flex justify-content-center gap-3 mb-5">
            <a href="{% url 'services:manage_categories' %}" class="btn btn-outline-dark rounded-pill px-3 py-2">
                <i class="bi bi-arrow-left me-1"></i> Back to Categories
            </a>
        </div>
    </div>
{% endblock %}